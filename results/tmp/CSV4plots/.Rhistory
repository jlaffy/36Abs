source('~/36Abs/newscripts/writeCSV4plots.R')
install.packages("ggplot2")
preh149MU7_IMML103 <- read.csv("~/36Abs/results/tmp/big_IMML103_heavy/preh149MU7_Prob_Heavy_IMML103_big.csv")
preh149MU7_NAIL120 <- read.csv("~/36Abs/results/tmp/big_NAIL120_heavy/preh149MU7_Prob_Heavy_NAIL120_big.csv")
preh149MU7_NAIL107 <- read.csv("~/36Abs/results/tmp/big_NAIL107_heavy/preh149MU7_Prob_Heavy_NAIL107_big.csv")
preh149MU7_IMML103small <- read.csv("~/36Abs/results/tmp/small_IMML103_heavy/preh149MU7_Prob_Heavy_IMML103_small.csv")
preh149MU7_NAIL120small <- read.csv("~/36Abs/results/tmp/small_NAIL120_heavy/preh149MU7_Prob_Heavy_NAIL120_small.csv")
preh149MU7_NAIL107small <- read.csv("~/36Abs/results/tmp/small_NAIL107_heavy/preh149MU7_Prob_Heavy_NAIL107_small.csv")
#select rows from data.frame
IMML103 <- preh149MU7_IMML103[2,]
NAIL120 <- preh149MU7_NAIL120[2,]
NAIL107 <- preh149MU7_NAIL107[2,]
IMML103small <- preh149MU7_IMML103small[2,]
NAIL120small <- preh149MU7_NAIL120small[2,]
NAIL107small <- preh149MU7_NAIL107small[2,]
#exclude first element
IMML103 <- c(t(IMML103[-1]))
NAIL120 <- c(t(NAIL120[-1]))
NAIL107 <- c(t(NAIL107[-1]))
IMML103small <- c(t(IMML103small[-1]))
NAIL120small <- c(t(NAIL120small[-1]))
NAIL107small <- c(t(NAIL107small[-1]))
a.a.seq <- preh149MU7_IMML103small[1,]
a.a.seq <- c(t(a.a.seq[-1]))
a.a.seq = data.frame(a.a.seq)
big <- data.frame(NAIL120, IMML103, NAIL107)
colnames(big) = c("NAIL120big", "IMML103big", "NAIL107big")
small <- data.frame(a.a.seq, NAIL120small, IMML103small, NAIL107small)
colnames(small)[1] = "preh149MU7"
df = cbind(small,big)
df
rows = apply(df[, 2:7], 1, function(i) length(unique(i)) > 1)
rows
selected
library(reshape2)
library(ggplot2)
df2 = selected[,c("NAIL120big","IMML103big","NAIL107big")]
df2
df3 = t(df2)
df3
df4 = melt(df3)
df4
jpeg(file="~/36Abs/results/tmp/CSV4plots/preh149MU7_allLight.jpg", width=4, height=4, units="in", res=300)
df4plot = ggplot(data = df4, aes(x = as.factor(Var2), y = value, fill = Var1)) +
geom_bar(stat = "identity", position = position_dodge(), size=.3) +
scale_fill_hue(name="Light chain ID") +
xlab(c("Amino acid position")) + ylab(c("Contact probability")) +
ggtitle(c("Impact of light chain on heavy chain-antigen contacts"))
dev.off()
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
dataset
library(stringr)
letters <- selected$2
letters <- selected[,2]
letters
letters <- selected[,1]
letters
getCount <- function(selected,letters)
{
dataset <- selected
letters <- selected[,1]
library(stringr)
getCount <- function(dataset,letters)
{
wcount <- str_count(dataset$letters, "A")
return(data.frame(data,wcount))
}
apply(df[1:, 1], 1, function(i) length(unique(i)) > 1)
source('~/.active-rstudio-document')
wcount
wcount <- str_count(dataset$letters, "A")
return(data.frame(data,wcount))
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
(data.frame(data,wcount))
id <- c(1:4)
text <- c('I have a Dataset with 2 columns a',
'nd multiple rows. first column ID', 'second column the text which',
'n the text which belongs to it.')
dataset <- data.frame(id,text)
library(stringr)
getCount <- function(data,keyword)
{
wcount <- str_count(dataset$text, keyword)
return(data.frame(data,wcount))
}
dataset
id
text
data()
return(data.frame(dataset,wcount))
return(data.frame(dataset$text,wcount))
a.a.seq
str(a.a.seq)
colSums(selected == "A")
colSums(selected == "Y")
colSums(selected == "W")
a = table(a.a.seq)
a
a = as.data.frame(table(a.a.seq))
a = as.data.frame(table(a.a.seq))
a
a[names(a=="S")]
a[names(a==S)]
a = as.data.frame(table(a.a.seq))
a[names(a==S)]
a[names(a=="S")]
a.a.seq = data.frame(a.a.seq)
a.a.seq
a = table(a.a.seq)
a
cbind(a.a.seq, a)
a = table(selected)
a = table(selected$a.a.seq)
a
a = as.data.frame(table(selected$a.a.seq))
a
count(selected, "a.a.seq")
install.packages("plyr"")
install.packages("plyr")
install.packages("plyr")
install.packages("plyr")
count(selected, "a.a.seq")
library(plyr)
count(selected, "a.a.seq")
library(plyr)
count(selected, "preh149MU7")
selected
t(count(selected, "preh149MU7"))
count(selected, selected[1])
library(plyr)
count(selected, selected[1])
selected = df[rows,]
#write.csv(selected, file = "~/36Abs/results/tmp/CSV4plots/preh149MU7_allLight.csv", quote=FALSE)
library(plyr)
count(selected, selected[1])
count(selected, "selected[1]")
count(selected, selected$1)
count(selected, selected[,1])
selected = df[rows,]
#write.csv(selected, file = "~/36Abs/results/tmp/CSV4plots/preh149MU7_allLight.csv", quote=FALSE)
library(plyr)
count(selected, selected[,1])
source('~/36Abs/newscripts/writeCSV4plots.R')
source('~/36Abs/newscripts/writeCSV4plots.R')
source('~/36Abs/newscripts/writeCSV4plots.R')
a.a.seq <- preh149MU7_IMML103small[1,]
a.a.seq <- c(t(a.a.seq[-1]))
a.a.seq = data.frame(a.a.seq)
big <- data.frame(NAIL120, IMML103, NAIL107)
colnames(big) = c("NAIL120big", "IMML103big", "NAIL107big")
small <- data.frame(a.a.seq, NAIL120small, IMML103small, NAIL107small)
colnames(small)[1] = "preh149MU7"
df = cbind(small,big)
rows = apply(df[, 2:7], 1, function(i) length(unique(i)) > 1)
selected = df[rows,]
#write.csv(selected, file = "~/36Abs/results/tmp/CSV4plots/preh149MU7_allLight.csv", quote=FALSE)
library(plyr)
count(selected, selected[,1])
library(plyr)
count(selected, selected"preh149MU7")
count(selected, "preh149MU7")
getwd()
files = lapply(dir(), read.csv)
for (i in files) {
files = lapply(dir(), read.csv)
quit()
}
files = lapply(dir(), read.csv)
id = ("immh103MV2","immh149MV5", "immh159MU5", "naih11", "preh118", "preh119", "preh146", "preh138MV4", "preh149MU5", "preh149MU7")
filenames <- list.files(full.names=TRUE)
id = ("immh103MV2","immh149MV5", "immh159MU5", "naih11", "preh118", "preh119", "preh146", "preh138MV4", "preh149MU5", "preh149MU7")
id = c("immh103MV2","immh149MV5", "immh159MU5", "naih11", "preh118", "preh119", "preh146", "preh138MV4", "preh149MU5", "preh149MU7")
filenames <- list.files(full.names=TRUE)
All <- lapply(filenames,function(i){
read.csv(i, header=TRUE, skip=4)
for (i in files) {
id = c("immh103MV2","immh149MV5", "immh159MU5", "naih11", "preh118", "preh119", "preh146", "preh138MV4", "preh149MU5", "preh149MU7")
filenames <- list.files(full.names=TRUE)
All <- lapply(filenames,function(i){
read.csv(i, header=TRUE, skip=4)
})
All <- lapply(filenames,function(i),read.csv(i, header=TRUE, skip=4))
id = c("immh103MV2","immh149MV5", "immh159MU5", "naih11", "preh118", "preh119", "preh146", "preh138MV4", "preh149MU5", "preh149MU7")
filenames <- list.files(full.names=TRUE)
All <- lapply(filenames,function(i){
read.csv(i, header=TRUE, skip=4)
})
filenames
All <- lapply(filenames,function(i)
read.csv(i, header=TRUE, skip=4)
)
source('~/36Abs/newscripts/writeCSV4plots.R')
qplot(data=df4, aes(x = as.factor(Var2), y = value, fill = Var1)) +
geom_bar(stat = "identity", width = 1.5, position = position_dodge(), size=.3)
library(reshape2)
library(ggplot2)
df2 = selected[,c("NAIL120big","IMML103big","NAIL107big")]
df3 = t(df2)
df4 = melt(df3)
qplot(data=df4, aes(x = as.factor(Var2), y = value, fill = Var1)) +
geom_bar(stat = "identity", width = 1.5, position = position_dodge(), size=.3)
qplot(data=df4, aes(x = as.factor(Var2), y = value, fill = Var1), geom="bar", stat = "identity", width = 1.5, position = position_dodge(), size=.3)
library(reshape2)
library(ggplot2)
df2 = selected[,c("NAIL120big","IMML103big","NAIL107big")]
df3 = t(df2)
df4 = melt(df3)
df4plot = ggplot(data = df4, aes(x = as.factor(Var2), y = value, fill = Var1)) +
geom_bar(stat = "identity", width = 1.5, position = position_dodge(), size=.3) +
scale_fill_hue(name="Light chain ID") +
xlab(c("Amino acid position")) + ylab(c("Contact probability")) +
ggtitle(c("Impact of light chain on heavy chain-antigen contacts"))
df4plot
df4plot = ggplot(data = df4, aes(x = as.factor(Var2), y = value, fill = Var1)) +
geom_bar(stat = "identity", width = 1.5, position = "dodge", size=.3) +
scale_fill_hue(name="Light chain ID") +
xlab(c("Amino acid position")) + ylab(c("Contact probability")) +
ggtitle(c("Impact of light chain on heavy chain-antigen contacts"))
df4plot
count(df, "preh149MU7")
dfc[2]
dfc[,2]
library(reshape2)
dfc-dfs
dfc["frequency"]
dfc[,"frequency"]
dfc = count(df, "preh149MU7")
dfs = count(selected, "preh149MU7")
df
df = cbind(small,big)
df
source('~/36Abs/newscripts/writeCSV4plots.R')
df
nrow(df)
d = dfc[,"freq"] /132
d
data.frame(d)
dfs
dfc
d
p = dfs[,"freq"] * d
source('~/36Abs/newscripts/writeCSV4plots.R')
source('~/36Abs/newscripts/writeCSV4plots.R')
df
load_data <- function(path) {
files <- dir(path, pattern = '\\.csv', full.names = TRUE)
tables <- lapply(files, read.csv)
do.call(rbind, tables)
}
preh149MU7_IMML103 <- read.csv("~/36Abs/results/tmp/big_IMML103_heavy/preh149MU7_Prob_Heavy_IMML103_big.csv")
tables
do.call(rbind, tables)
temp = list.files(pattern="*.csv")
for (i in 1:length(temp)) assign(temp[i], read.csv(temp[i]))
temp[i]
temp = list.files(pattern="*.csv")
for (i in 1:length(temp)) assign(temp[i], read.csv(temp[i])) {
print(temp[i])
print(temp[3])
for j in 1:10 print(temp[j])
for (j in 1:10) print(temp[j])
temp = list.files(pattern="[a-z]{4}\d{3}.csv")
temp = list.files(pattern="'[a-z]{4}/d{3}.csv")
for (i in 1:length(temp)) assign(temp[i], read.csv(temp[i]))
for (j in 1:10) print(temp[j])
temp = list.files(pattern="[a-z]{4}/d{3}.csv")
for (i in 1:length(temp)) assign(temp[i], read.csv(temp[i]))
for (j in 1:10) print(temp[j])
temp = list.files(pattern="^[a-z]{4}*.csv")
temp = list.files(pattern="^[a-z]{4}.csv")
for (i in 1:length(temp)) assign(temp[i], read.csv(temp[i]))
#!/usr/bin/Rscript
temp = list.files(pattern="^[a-z]{4}.csv")
for (i in 1:length(temp)) assign(temp[i], read.csv(temp[i]))
temp
temp = list.files(pattern="'([a-z]{4}[0-9]{3}(([MUV]{2}[0-9])?))'")
for (i in 1:length(temp)) assign(temp[i], read.csv(temp[i]))
source('~/36Abs/newscripts/generalCSV4plots.R')
temp = list.files(pattern="([a-z]{4}[0-9]{3}(([MUV]{2}[0-9])?))\.csv")
temp = list.files(pattern="([a-z]{4}[0-9]{3}(([MUV]{2}[0-9])?))*csv")
for (i in 1:length(temp)) assign(temp[i], read.csv(temp[i]))
for (j in 1:10) print(temp[j])
temp = list.files(pattern="([a-z]{4}[0-9]{3}(([MUV]{2}[0-9])?))")
for (i in 1:length(temp)) assign(temp[i], read.csv(temp[i]))
for (j in 1:10) print(temp[j])
temp = list.files(pattern="([a-z]{4}[0-9]{3}(([MUV]{2}[0-9])?))")
for (i in 1:length(temp)) assign(temp[i], read.csv(temp[i]))
for (j in 1:10) print(temp[j])
source('~/36Abs/newscripts/generalCSV4plots.R')
temp = list.files(pattern="([a-z]{4}[0-9]{3}(([MUV]{2}[0-9])?)){.csv}")
for (i in 1:length(temp)) assign(temp[i], read.csv(temp[i]))
temp = list.files(pattern=".{7,10}.csv$")
#"([a-z]{4}[0-9]{3}(([MUV]{2}[0-9])?)){.csv}")
for (i in 1:length(temp)) assign(temp[i], read.csv(temp[i]))
for (j in 1:10) print(temp[j])
source('~/36Abs/newscripts/generalCSV4plots.R')
source('~/36Abs/newscripts/generalCSV4plots.R')
temp = list.files(pattern=".{7,10}.csv$")
for (i in 1:length(temp)) assign(temp[i], read.csv(temp[i]))
#for (j in 1:10) print(temp[j])
print(temp[preh138])
print(temp["preh138"])
print(temp[1:10])
immh103MV2_allLight.csv
temp
temp[i] = selected
for (i in 1:length(temp)) assign(temp[i], read.csv(temp[i]))
library(plyr)
dfc = count(df, "preh149MU7")
dfs = count(selected, "preh149MU7")
preh149MU7_IMML103 <- read.csv("~/36Abs/results/tmp/big_IMML103_heavy/preh149MU7_Prob_Heavy_IMML103_big.csv")
dfs
dfc
(temp[i]) = selected
?assign
fullseqs = list.files(dir("fullseqs"),pattern=".{7,10}_fullseq.csv$")
fullseqs = list.files(dir("fullseq"),pattern=".{7,10}_fullseq.csv$")
for (i in 1:length(temp)) assign(temp[i], read.csv(temp[i]))
shortseqs = list.files(pattern=".{7,10}.csv$")
long = list.files(dir("fullseq"),pattern=".{7,10}_fullseq.csv$")
for (i in 1:length(short)) assign(temp[i], read.csv(temp[i]))
for (j in 1:length(long)) assign(temp[j], read.csv(temp[j]))
short = list.files(pattern=".{7,10}.csv$")
long = list.files(dir("fullseq"),pattern=".{7,10}_fullseq.csv$")
for (i in 1:length(short)) assign(temp[i], read.csv(temp[i]))
source('~/36Abs/newscripts/generalCSV4plots.R')
short = list.files(pattern=".{7,10}.csv$")
long = list.files(dir("fullseq"),pattern=".{7,10}_fullseq.csv$")
for (i in 1:length(short)) assign(temp[i], read.csv(temp[i]))
for (j in 1:length(long)) assign(temp[j], read.csv(temp[j]))
short = list.files(pattern=".{7,10}.csv$")
for (i in 1:length(short)) assign(temp[i], read.csv(temp[i]))
short = list.files(pattern=".{7,10}.csv$")
long = list.files(dir("fullseq"),pattern=".{7,10}_fullseq.csv$")
for (i in 1:length(short)) assign(short[i], read.csv(short[i]))
for (j in 1:length(long)) assign(long[j], read.csv(long[j]))
long = list.files(dir("fullseq/"),pattern=".{7,10}_fullseq.csv$")
for (i in 1:length(short)) assign(short[i], read.csv(short[i]))
for (j in 1:length(long)) assign(long[j], read.csv(long[j]))
long = list.files(pattern=".{7,10}_fullseq.csv$")
for (i in 1:length(short)) assign(short[i], read.csv(short[i]))
for (j in 1:length(long)) assign(long[j], read.csv(long[j]))
source('~/36Abs/newscripts/generalCSV4plots.R')
short = list.files(pattern=".{7,10}.csv$")
long = list.files(pattern=".{7,10}_fullseq.csv$")
for (i in 1:length(short)) assign(short[i], read.csv(short[i]))
for (j in 1:length(long)) assign(long[j], read.csv(long[j]))
short = list.files(pattern=".{7,10}.csv$")
long = list.files(pattern="_fullseq_allLight.csv$")
for (i in 1:length(short)) assign(short[i], read.csv(short[i]))
for (j in 1:length(long)) assign(long[j], read.csv(long[j]))
print(long[1:10])
short = list.files(pattern=".{7,10}.csv$")
long = list.files(pattern="_fullseq_allLight.csv$")
for (i in 1:length(short)) assign(short[i], read.csv(short[i]), print(short[i]))
for (j in 1:length(long)) assign(long[j], read.csv(long[j]), print(long[i]))
for (i in 1:length(short)) assign(short[i], read.csv(short[i]), print(short[1:i]))
for (i in 1:length(short)) assign(short[i], read.csv(short[i]), print(short[]))
source('~/36Abs/newscripts/generalCSV4plots.R')
short = list.files(pattern=".{7,10}.csv$")
long = list.files(pattern="_fullseq_allLight.csv$")
for (i in 1:length(short)) assign(short[i], read.csv(short[i]), print(short[]))
